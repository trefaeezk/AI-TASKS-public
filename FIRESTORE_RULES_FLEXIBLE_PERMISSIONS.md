# ุชุญุฏูุซ ููุงุนุฏ Firestore ูุฏุนู ุงูุตูุงุญูุงุช ุงููุฑูุฉ

## ุงููุดููุฉ ุงูุฃุตููุฉ โ

ุงูููุงุนุฏ ุงูุณุงุจูุฉ ูุงูุช **ูููุฏุฉ ุฌุฏุงู** ูุชุนุชูุฏ ููุท ุนูู ุงูุฃุฏูุงุฑ ุงูุซุงุจุชุฉ:
- ููุท `admin`, `supervisor`, `engineer` ูููููู ุฅูุดุงุก/ุชุนุฏูู ุงูููุงู
- ูุง ุชุฏุนู ุงูุตูุงุญูุงุช ุงููุฎุตุตุฉ ุงูุชู ูุญุฏุฏูุง ุงูุฃุฏูู
- ุชุชุฌุงูู ูุธุงู `permissions` ุงููุฑู ูู ุงูุชุทุจูู

## ุงูุญู ุงูุฌุฏูุฏ โ

### 1. **ููุงุนุฏ ุงูููุงู ุงููุฑูุฉ** ๐ง

#### **ูุจู ุงูุชุญุฏูุซ**:
```javascript
// ูููุฏ - ููุท ุฃุฏูุงุฑ ูุญุฏุฏุฉ
allow create, update: if request.auth != null &&
  (get(...).data.role == 'admin' ||
   get(...).data.role == 'supervisor' ||
   get(...).data.role == 'engineer');
```

#### **ุจุนุฏ ุงูุชุญุฏูุซ**:
```javascript
// ูุฑู - ูุฏุนู ุงูุตูุงุญูุงุช ุงููุฎุตุตุฉ + ุงูุฃุฏูุงุฑ + ููุดุฆ ุงููููุฉ
allow create: if request.auth != null &&
  exists(/databases/$(database)/documents/organizations/$(orgId)/members/$(request.auth.uid)) &&
  (get(...).data.permissions.canCreateTasks == true ||
   get(...).data.role in ['admin', 'supervisor', 'engineer']);

allow update: if request.auth != null &&
  exists(/databases/$(database)/documents/organizations/$(orgId)/members/$(request.auth.uid)) &&
  (get(...).data.permissions.canEditTasks == true ||
   get(...).data.role in ['admin', 'supervisor', 'engineer'] ||
   resource.data.createdBy == request.auth.uid);

allow delete: if request.auth != null &&
  exists(/databases/$(database)/documents/organizations/$(orgId)/members/$(request.auth.uid)) &&
  (get(...).data.permissions.canDeleteTasks == true ||
   get(...).data.role == 'admin' ||
   resource.data.createdBy == request.auth.uid);
```

### 2. **ููุงุนุฏ ุงูุชูุงุฑูุฑ ุงููุฑูุฉ** ๐

#### **ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ**:
- ุฏุนู `canViewReports`, `canCreateReports`, `canEditReports`, `canDeleteReports`
- ููุดุฆ ุงูุชูุฑูุฑ ููููู ุชุนุฏููู/ุญุฐูู
- ุงูุฃุฏูุงุฑ ุงูุชูููุฏูุฉ ูุง ุชุฒุงู ูุฏุนููุฉ

### 3. **ููุงุนุฏ ุงูููุงู ุงููุฑุฏูุฉ** ๐ค

#### **ุฅุถุงูุฉ ุฌุฏูุฏุฉ**:
```javascript
// ููุงุนุฏ ููููุงู ุงููุฑุฏูุฉ (ุฎุงุฑุฌ ุงููุคุณุณุงุช)
match /tasks/{taskId} {
  // ูููู ูููุณุชุฎุฏู ูุฑุงุกุฉ ููุงูู ุงูุฎุงุตุฉ ุฃู ุงูููุงู ุงููุดุชุฑูุฉ ูุนู
  allow read: if request.auth != null &&
               (resource.data.userId == request.auth.uid ||
                resource.data.assignedTo == request.auth.uid ||
                resource.data.sharedWith != null && request.auth.uid in resource.data.sharedWith);

  // ูููู ูููุณุชุฎุฏู ุฅูุดุงุก ููุงู ุฌุฏูุฏุฉ
  allow create: if request.auth != null &&
                 request.resource.data.userId == request.auth.uid;

  // ูููู ูููุณุชุฎุฏู ุชุนุฏูู ููุงูู ุงูุฎุงุตุฉ ุฃู ุงูููุงู ุงููุณูุฏุฉ ุฅููู
  allow update: if request.auth != null &&
                 (resource.data.userId == request.auth.uid ||
                  resource.data.assignedTo == request.auth.uid);

  // ูููู ูููุณุชุฎุฏู ุญุฐู ููุงูู ุงูุฎุงุตุฉ ููุท
  allow delete: if request.auth != null &&
                 resource.data.userId == request.auth.uid;
}
```

## ุงูุตูุงุญูุงุช ุงููุฏุนููุฉ ุงูุขู ๐ฏ

### **ููููุงู**:
- โ `canViewTasks` - ุนุฑุถ ุงูููุงู
- โ `canCreateTasks` - ุฅูุดุงุก ููุงู ุฌุฏูุฏุฉ
- โ `canEditTasks` - ุชุนุฏูู ุงูููุงู
- โ `canDeleteTasks` - ุญุฐู ุงูููุงู

### **ููุชูุงุฑูุฑ**:
- โ `canViewReports` - ุนุฑุถ ุงูุชูุงุฑูุฑ
- โ `canCreateReports` - ุฅูุดุงุก ุชูุงุฑูุฑ ุฌุฏูุฏุฉ
- โ `canEditReports` - ุชุนุฏูู ุงูุชูุงุฑูุฑ
- โ `canDeleteReports` - ุญุฐู ุงูุชูุงุฑูุฑ

### **ุงูุฃุฏูุงุฑ ุงูุชูููุฏูุฉ** (ูุง ุชุฒุงู ูุฏุนููุฉ):
- โ `admin` - ุตูุงุญูุงุช ูุงููุฉ
- โ `supervisor` - ุตูุงุญูุงุช ุฅุดุฑุงููุฉ
- โ `engineer` - ุตูุงุญูุงุช ููุฏุณูุฉ
- โ `technician` - ุตูุงุญูุงุช ูููุฉ
- โ `assistant` - ุตูุงุญูุงุช ูุณุงุนุฏ

## ููุทู ุงูุตูุงุญูุงุช ุงูุฌุฏูุฏ ๐ง

### **ุฃููููุฉ ุงูุตูุงุญูุงุช**:
1. **ุงูุตูุงุญูุงุช ุงููุฎุตุตุฉ** (`permissions.canXXX`) - ุฃุนูู ุฃููููุฉ
2. **ุงูุฃุฏูุงุฑ ุงูุชูููุฏูุฉ** (`role`) - ุฃููููุฉ ูุชูุณุทุฉ
3. **ููููุฉ ุงููุญุชูู** (`createdBy`) - ูููุญุชูู ุงูุดุฎุตู

### **ูุซุงู ุนููู**:
```javascript
// ูุณุชุฎุฏู ุจุฏูุฑ "assistant" ููู ูุฏูู ุตูุงุญูุฉ ูุฎุตุตุฉ
{
  "role": "assistant",           // ุฏูุฑ ุนุงุฏู ูุง ูุณูุญ ุจุฅูุดุงุก ููุงู
  "permissions": {
    "canCreateTasks": true,      // ุตูุงุญูุฉ ูุฎุตุตุฉ ุชุณูุญ ุจุฅูุดุงุก ููุงู
    "canEditTasks": false,       // ูุง ูููู ุชุนุฏูู ููุงู ุงูุขุฎุฑูู
    "canDeleteTasks": false      // ูุง ูููู ุญุฐู ููุงู ุงูุขุฎุฑูู
  }
}

// ุงููุชูุฌุฉ: ููููู ุฅูุดุงุก ููุงู ููู ูุง ููููู ุชุนุฏูู/ุญุฐู ููุงู ุงูุขุฎุฑูู
```

## ุงูููุงุฆุฏ ุงูุฌุฏูุฏุฉ ๐

### โ **ูุฑููุฉ ูุงููุฉ**:
- ุงูุฃุฏูู ููููู ููุญ ุตูุงุญูุงุช ูุฎุตุตุฉ ูุฃู ุดุฎุต
- ูุง ุชูุฌุฏ ูููุฏ ุตุงุฑูุฉ ุนูู ุงูุฃุฏูุงุฑ
- ุฏุนู ููุตูุงุญูุงุช ุงูุฌุฒุฆูุฉ

### โ **ุฃูุงู ูุญุณู**:
- ุงูุชุญูู ูู ุงูุนุถููุฉ ูู ุงููุคุณุณุฉ
- ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ุงููุฎุตุตุฉ
- ุญูุงูุฉ ุงููุญุชูู ุงูุดุฎุตู

### โ **ุฏุนู ุงูููุงู ุงููุฑุฏูุฉ**:
- ููุงุนุฏ ูููุตูุฉ ูููุณุชุฎุฏููู ุงูุฃูุฑุงุฏ
- ุฏุนู ุงูููุงู ุงููุดุชุฑูุฉ
- ุญูุงูุฉ ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ

### โ **ุชูุงูู ูุน ุงููุธุงู ุงูุญุงูู**:
- ุงูุฃุฏูุงุฑ ุงูุชูููุฏูุฉ ูุง ุชุฒุงู ุชุนูู
- ูุง ุญุงุฌุฉ ูุชุบููุฑ ุงูููุฏ ุงูููุฌูุฏ
- ุงูุชูุงู ุณูุณ ูููุธุงู ุงูุฌุฏูุฏ

## ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู ๐ก

### **ูุซุงู 1: ูุณุงุนุฏ ุจุตูุงุญูุงุช ุฎุงุตุฉ**
```json
{
  "userId": "user123",
  "role": "assistant",
  "permissions": {
    "canCreateTasks": true,
    "canViewReports": true,
    "canEditTasks": false,
    "canDeleteTasks": false
  }
}
```
**ุงููุชูุฌุฉ**: ููููู ุฅูุดุงุก ููุงู ูุนุฑุถ ุงูุชูุงุฑูุฑ ููุท

### **ูุซุงู 2: ููู ุจุตูุงุญูุงุช ูุญุฏูุฏุฉ**
```json
{
  "userId": "user456",
  "role": "technician",
  "permissions": {
    "canCreateTasks": false,
    "canEditTasks": true,
    "canViewReports": false,
    "canDeleteTasks": false
  }
}
```
**ุงููุชูุฌุฉ**: ููููู ุชุนุฏูู ุงูููุงู ุงูููุฌูุฏุฉ ููุท

### **ูุซุงู 3: ูุดุฑู ุจุตูุงุญูุงุช ูุงููุฉ**
```json
{
  "userId": "user789",
  "role": "supervisor",
  "permissions": {
    // ุงูุตูุงุญูุงุช ุงููุฎุตุตุฉ ุงุฎุชูุงุฑูุฉ ูููุดุฑููู
    // ุงูุฏูุฑ ูุนุทู ุตูุงุญูุงุช ุงูุชุฑุงุถูุฉ
  }
}
```
**ุงููุชูุฌุฉ**: ุตูุงุญูุงุช ูุงููุฉ ุจูุงุกู ุนูู ุงูุฏูุฑ

## ุงูุชุทุจูู ูุงููุดุฑ ๐

### **ุฎุทูุงุช ุงููุดุฑ**:
1. **ุชุญุฏูุซ ุงูููุงุนุฏ**:
   ```bash
   firebase deploy --only firestore:rules
   ```

2. **ุงุฎุชุจุงุฑ ุงูุตูุงุญูุงุช**:
   - ุงุฎุชุจุงุฑ ุงููุณุชุฎุฏููู ุจุฃุฏูุงุฑ ูุฎุชููุฉ
   - ุงุฎุชุจุงุฑ ุงูุตูุงุญูุงุช ุงููุฎุตุตุฉ
   - ุงูุชุฃูุฏ ูู ุนูู ุงูููุงู ุงููุฑุฏูุฉ

3. **ูุฑุงูุจุฉ ุงูุฃุฏุงุก**:
   - ูุฑุงูุจุฉ ุงุณุชุนูุงูุงุช Firestore
   - ุงูุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก ุตูุงุญูุงุช
   - ูุฑุงุฌุนุฉ ุณุฌูุงุช ุงูุฃูุงู

### **ุงูุชุญูู ูู ุงููุฌุงุญ**:
- โ ุงููุณุชุฎุฏููู ุจุตูุงุญูุงุช ูุฎุตุตุฉ ูููููู ุงููุตูู ููููุฒุงุช
- โ ุงูุฃุฏูุงุฑ ุงูุชูููุฏูุฉ ูุง ุชุฒุงู ุชุนูู
- โ ุงูููุงู ุงููุฑุฏูุฉ ูุญููุฉ ููุชุงุญุฉ ูููุงูููู
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู Console

## ุงูุฎูุงุตุฉ ๐

ุชู ุชุญุฏูุซ ููุงุนุฏ Firestore ูุชุตุจุญ:

1. **ูุฑูุฉ** - ุชุฏุนู ุงูุตูุงุญูุงุช ุงููุฎุตุตุฉ
2. **ุขููุฉ** - ุชุญูู ุงูุจูุงูุงุช ูุงูุฎุตูุตูุฉ  
3. **ุดุงููุฉ** - ุชุฏุนู ุงููุคุณุณุงุช ูุงูุฃูุฑุงุฏ
4. **ูุชูุงููุฉ** - ุชุนูู ูุน ุงููุธุงู ุงูุญุงูู

ุงููุชูุฌุฉ: **ูุธุงู ุตูุงุญูุงุช ูุฑู ูููู ูุฏุนู ุฌููุน ุงุญุชูุงุฌุงุช ุงูุชุทุจูู!** โจ
