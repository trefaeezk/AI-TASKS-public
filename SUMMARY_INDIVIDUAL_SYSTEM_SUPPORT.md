# ููุฎุต ุฏุนู ูุธุงู ุงูุฃูุฑุงุฏ - ูู ูุฑุฏ ูุนุฏู ุฅุนุฏุงุฏุงุชู ุงูุฎุงุตุฉ

## โ ุชู ุงูุชุฃูุฏ ูู ุฏุนู ูุธุงู ุงูุฃูุฑุงุฏ ุจุงููุงูู!

ููุฏ ุชู ูุญุต ูุชุญุฏูุซ ุฌููุน ุฌูุงูุจ ุงูุชุทุจูู ูุถูุงู ุฃู **ูู ูุฑุฏ ููููู ุชุนุฏูู ุฅุนุฏุงุฏุงุชู ุงูุฎุงุตุฉ ุจู ุญุณุจ ุงูููุทู ุงููุทููุจ**.

## ๐ง ุงูููููุงุช ุงููุฏุนููุฉ:

### 1. ุฅุนุฏุงุฏุงุช ุงููุบุฉ
**ุงูููู**: `src/context/LanguageContext.tsx`
```typescript
// ุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููู ูุณุชุฎุฏู
const userSettingsRef = doc(db, 'userSettings', user.uid);
await setDoc(userSettingsRef, {
  language: lang,
  createdAt: new Date(),
  updatedAt: new Date()
});
```

**ุงููุฌููุนุฉ**: `/userSettings/{userId}`
**ุงูุตูุงุญูุงุช**: ูู ูุณุชุฎุฏู ููููู ุชุนุฏูู ุฅุนุฏุงุฏุงุช ุงููุบุฉ ุงูุฎุงุตุฉ ุจู ููุท

### 2. ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช
**ุงููููุงุช**: 
- `src/services/notifications.ts`
- `src/app/(app)/settings/notifications/page.tsx`
- `src/app/(organization)/org/settings/notifications/page.tsx`

```typescript
// ุชุญุฏูุซ ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช ูููุณุชุฎุฏู
await updateUserNotificationSettings(userId, {
  email: true,
  push: false,
  taskReminders: true
});
```

**ุงููุฌููุนุฉ**: `/notificationSettings/{userId}`
**ุงูุตูุงุญูุงุช**: ูู ูุณุชุฎุฏู ููููู ุชุนุฏูู ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช ุงูุฎุงุตุฉ ุจู ููุท

### 3. ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ ููุฃูุฑุงุฏ
**ุงููุฌููุนุฉ**: `/individuals/{userId}`
**ุงูุตูุงุญูุงุช**: ูู ูุณุชุฎุฏู ูุฑุฏู ููููู ุฅุฏุงุฑุฉ ุฌููุน ุจูุงูุงุชู ุงูุดุฎุตูุฉ

### 4. ูุนูููุงุช ุงููุณุชุฎุฏู ุงูุฃุณุงุณูุฉ
**ุงููุฌููุนุฉ**: `/users/{userId}`
**ุงูุตูุงุญูุงุช**: ูู ูุณุชุฎุฏู ููููู ุชุญุฏูุซ ูุนูููุงุชู ุงูุฃุณุงุณูุฉ

## ๐ก๏ธ ููุงุนุฏ Firestore ุงููุญุฏุซุฉ:

### ููุงุนุฏ ุฅุนุฏุงุฏุงุช ุงููุณุชุฎุฏููู ุงููุฑุฏููู:
```javascript
match /userSettings/{userId} {
  // ูููู ูููุณุชุฎุฏู ูุฑุงุกุฉ ุฅุนุฏุงุฏุงุชู ุงูุฎุงุตุฉ ููุท
  allow read: if request.auth != null && request.auth.uid == userId;
  
  // ูููู ูููุณุชุฎุฏู ุชุนุฏูู ุฅุนุฏุงุฏุงุชู ุงูุฎุงุตุฉ ููุท
  allow write: if request.auth != null && request.auth.uid == userId;
  
  // ูููู ูููุฏูุฑูู ูุฑุงุกุฉ ูุชุนุฏูู ุฅุนุฏุงุฏุงุช ุฌููุน ุงููุณุชุฎุฏููู (ููุฏุนู ุงูููู)
  allow read, write: if request.auth != null && request.auth.token.admin == true;
}
```

### ููุงุนุฏ ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช:
```javascript
match /notificationSettings/{userId} {
  // ูููู ูููุณุชุฎุฏู ูุฑุงุกุฉ ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช ุงูุฎุงุตุฉ ุจู ููุท
  allow read: if request.auth != null && request.auth.uid == userId;
  
  // ูููู ูููุณุชุฎุฏู ุชุนุฏูู ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช ุงูุฎุงุตุฉ ุจู ููุท
  allow write: if request.auth != null && request.auth.uid == userId;
  
  // ูููู ูููุฏูุฑูู ูุฑุงุกุฉ ูุชุนุฏูู ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช ูุฌููุน ุงููุณุชุฎุฏููู
  allow read, write: if request.auth != null && request.auth.token.admin == true;
}
```

### ููุงุนุฏ ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ ููุฃูุฑุงุฏ:
```javascript
match /individuals/{userId}/{document=**} {
  // ูููู ูููุณุชุฎุฏู ูุฑุงุกุฉ ููุชุงุจุฉ ุจูุงูุงุชู ุงูุฎุงุตุฉ ููุท
  allow read, write: if request.auth != null && request.auth.uid == userId;
}
```

## ๐ ูุง ูููู ููู ูุณุชุฎุฏู ูุฑุฏู ูุนูู:

### โ ุงูุตูุงุญูุงุช ุงููุชุงุญุฉ:
1. **ุชุบููุฑ ุงููุบุฉ**: ุงูุนุฑุจูุฉุ ุงูุฅูุฌููุฒูุฉุ ุฅูุฎ
2. **ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช**: 
   - ุชูุนูู/ุฅูุบุงุก ุงูุฅุดุนุงุฑุงุช ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
   - ุชูุนูู/ุฅูุบุงุก ุงูุฅุดุนุงุฑุงุช ุงููุจุงุดุฑุฉ
   - ุฅุนุฏุงุฏุงุช ุชุฐููุฑุงุช ุงูููุงู
   - ุฅุนุฏุงุฏุงุช ุงูููุฎุตุงุช ุงูููููุฉ ูุงูุฃุณุจูุนูุฉ
3. **ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ**: ูู ูุฌููุนุฉ `individuals`
4. **ุชุญุฏูุซ ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ**: ุงูุงุณูุ ุงูุจุฑูุฏ ุงูุฅููุชุฑูููุ ุฅูุฎ
5. **ูุฑุงุกุฉ ุงูุฅุดุนุงุฑุงุช ุงูุฎุงุตุฉ**: ููุท ุงูุฅุดุนุงุฑุงุช ุงููุฑุณูุฉ ุฅููู

### โ ูุง ูุง ูููู ูุนูู:
1. **ุงููุตูู ูุฅุนุฏุงุฏุงุช ูุณุชุฎุฏููู ุขุฎุฑูู**
2. **ุชุนุฏูู ุฅุนุฏุงุฏุงุช ุงููุธุงู ุงูุนุงูุฉ**
3. **ุงููุตูู ูุจูุงูุงุช ุงููุคุณุณุงุช** (ุฅูุง ุฅุฐุง ูุงู ุนุถูุงู)
4. **ูุฑุงุกุฉ ุฅุดุนุงุฑุงุช ูุณุชุฎุฏููู ุขุฎุฑูู**

## ๐ ููููุฉ ุนูู ุงููุธุงู:

### 1. ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู:
```typescript
// ุชุญููู ุฅุนุฏุงุฏุงุช ุงููุณุชุฎุฏู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
const userSettingsRef = doc(db, 'userSettings', user.uid);
const userSettingsDoc = await getDoc(userSettingsRef);

if (userSettingsDoc.exists()) {
  const settings = userSettingsDoc.data();
  // ุชุทุจูู ุงูุฅุนุฏุงุฏุงุช (ุงููุบุฉุ ุฅูุฎ)
}
```

### 2. ุนูุฏ ุชุบููุฑ ุงูุฅุนุฏุงุฏุงุช:
```typescript
// ุญูุธ ุงูุฅุนุฏุงุฏุงุช ุงูุฌุฏูุฏุฉ
await updateDoc(userSettingsRef, {
  language: newLanguage,
  updatedAt: new Date()
});

// ุชุทุจูู ุงูุชุบููุฑุงุช ููุฑุงู
setLanguage(newLanguage);
```

### 3. ุงูุญูุงูุฉ ุนูู ูุณุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- Firestore ุชุชุญูู ูู `request.auth.uid == userId`
- ูุง ูููู ูููุณุชุฎุฏู ุงููุตูู ูุฅุนุฏุงุฏุงุช ุบูุฑู
- ุงููุฏูุฑูู ูุฏููู ุตูุงุญูุงุช ุฅุถุงููุฉ ููุฏุนู ุงูููู

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ:

### 1. ูุดุฑ ููุงุนุฏ Firestore:
```bash
firebase deploy --only firestore:rules
```

### 2. ุงุฎุชุจุงุฑ ุงููุธุงู:
1. ุณุฌู ุงูุฏุฎูู ููุณุชุฎุฏู ูุฑุฏู
2. ุงูุชูู ุฅูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช
3. ุบูุฑ ุงููุบุฉ ูุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช
4. ุชุฃูุฏ ูู ุญูุธ ุงูุชุบููุฑุงุช
5. ุณุฌู ุงูุฎุฑูุฌ ูุงุฏุฎู ูุฑุฉ ุฃุฎุฑู
6. ุชุฃูุฏ ูู ุชุทุจูู ุงูุฅุนุฏุงุฏุงุช ุงููุญููุธุฉ

### 3. ุงูุชุญูู ูู ุงูุฃูุงู:
1. ุญุงูู ุงููุตูู ูุฅุนุฏุงุฏุงุช ูุณุชุฎุฏู ุขุฎุฑ (ูุฌุจ ุฃู ููุดู)
2. ุชุฃูุฏ ูู ุนุฏู ุธููุฑ ุฃุฎุทุงุก ูู console
3. ุชุฃูุฏ ูู ุนูู ุฌููุน ุงููุธุงุฆู ุจุดูู ุตุญูุญ

## ๐ฏ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:

โ **ูุธุงู ุงูุฃูุฑุงุฏ ูุฏุนูู ุจุงููุงูู**
โ **ูู ูุฑุฏ ููููู ุชุนุฏูู ุฅุนุฏุงุฏุงุชู ุงูุฎุงุตุฉ**
โ **ุงูุฃูุงู ูุญููุธ ุนูู ุฌููุน ุงููุณุชููุงุช**
โ **ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู ุงูุตูุงุญูุงุช**
โ **ุงููุธุงู ูุนูู ุจุณูุงุณุฉ ููุฃูุฑุงุฏ ูุงููุคุณุณุงุช**

## ๐ ุงููููุงุช ุฐุงุช ุงูุตูุฉ:

1. `firestore.rules` - ููุงุนุฏ ุงูุฃูุงู ุงููุญุฏุซุฉ
2. `src/context/LanguageContext.tsx` - ุฅุฏุงุฑุฉ ุฅุนุฏุงุฏุงุช ุงููุบุฉ
3. `src/services/notifications.ts` - ุฅุฏุงุฑุฉ ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช
4. `src/app/(app)/settings/notifications/page.tsx` - ุตูุญุฉ ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช ููุฃูุฑุงุฏ
5. `FIRESTORE_RULES_DOCUMENTATION.md` - ุชูุซูู ุดุงูู ููููุงุนุฏ

**ุงูุฎูุงุตุฉ**: ุงููุธุงู ุงูุขู ูุฏุนู ุจุงููุงูู ููุทู "ูู ูุฑุฏ ูุนุฏู ุฅุนุฏุงุฏุงุชู ุงูุฎุงุตุฉ ุจู" ูุน ุงูุญูุงุธ ุนูู ุงูุฃูุงู ูุงูุงุณุชูุฑุงุฑ! ๐
